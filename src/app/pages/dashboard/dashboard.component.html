<div class="d-flex justify-content-between mb-3">
  <div *ngIf="statusService.running === undefined" class="d-flex align-items-center">
    <small class="text-muted"> Workhorse status is reqeusted...</small>
  </div>
  <div *ngIf="statusService.running !== undefined" class="d-flex align-items-center">
    <small class="text-muted font-weight-bold">
      Workhorse is {{ statusService.running ? 'running' : 'stopped with' }} {{ jobStatusCount?.total }} jobs:</small
    >
    <div class="ml-2 arends-dirty-hack">
      <job-status *ngIf="jobStatusCount?.active > 0" [status]="'ACTIVE'" [count]="jobStatusCount?.active" class="mr-2"></job-status>
      <job-status *ngIf="jobStatusCount?.inactive > 0" [status]="'INACTIVE'" [count]="jobStatusCount?.inactive" class="mr-2"></job-status>
      <job-status *ngIf="jobStatusCount?.error > 0" [status]="'ERROR'" [count]="jobStatusCount?.error" class="mr-2"></job-status>
      <job-status *ngIf="jobStatusCount?.noWorker > 0" [status]="'NO_WORKER'" [count]="jobStatusCount?.noWorker" class="mr-2"></job-status>
    </div>
  </div>

  <!-- Action-Buttons -->
  <div class="d-flex align-items-end">
    <div class="btn-group icon-btn-group" role="group">
      <button
        class="btn btn-outline-secondary"
        (click)="logsViewEnabled = !logsViewEnabled; saveDashboardView()"
        ngbPopover="Show Logs"
        triggers="mouseenter:mouseleave"
        [class.active]="logsViewEnabled"
      >
        <i class="ion ion-ios-document"></i>
      </button>
      <button
        class="btn btn-outline-secondary"
        (click)="threadsViewEnabled = !threadsViewEnabled; saveDashboardView()"
        ngbPopover="Show Threads"
        triggers="mouseenter:mouseleave"
        [class.active]="threadsViewEnabled"
      >
        <i class="ion ion-ios-pulse"></i>
      </button>
      <button
        class="btn btn-outline-secondary"
        (click)="lastExecutionsViewEnabled = !lastExecutionsViewEnabled; saveDashboardView()"
        ngbPopover="Show last executions"
        triggers="mouseenter:mouseleave"
        [class.active]="lastExecutionsViewEnabled"
      >
        <i class="ion ion-ios-pie"></i>
      </button>
      <button
        class="btn btn-outline-secondary"
        (click)="jobsViewEnabled = !jobsViewEnabled; saveDashboardView()"
        ngbPopover="Show currently queued or running"
        triggers="mouseenter:mouseleave"
        [class.active]="jobsViewEnabled"
      >
        <i class="ion ion-ios-list"></i>
      </button>
    </div>
  </div>
</div>

<!--  Dashboard-Panels -->
<div class="dashboard-row">
  <div *ngIf="logsViewEnabled">
    <log-text [limit]="10"></log-text>
  </div>
  <div *ngIf="threadsViewEnabled">
    <app-threads></app-threads>
  </div>
  <div *ngIf="lastExecutionsViewEnabled">
    <execution-count-pie-chart></execution-count-pie-chart>
  </div>
</div>

<div *ngIf="jobsViewEnabled">
  <div class="dashboard-row">
    <div>
      <job-execution-status-summary [status]="'PLANNED'"> </job-execution-status-summary>
    </div>
    <div>
      <job-execution-status-summary [status]="'QUEUED'"> </job-execution-status-summary>
    </div>
    <div>
      <job-execution-status-summary [status]="'RUNNING'"> </job-execution-status-summary>
    </div>
  </div>
  <div class="dashboard-row">
    <div>
      <job-execution-status-summary [status]="'ABORTED'"> </job-execution-status-summary>
    </div>
    <div>
      <job-execution-status-summary [status]="'FINISHED'"> </job-execution-status-summary>
    </div>
    <div>
      <job-execution-status-summary [status]="'FAILED'"> </job-execution-status-summary>
    </div>
  </div>
</div>
